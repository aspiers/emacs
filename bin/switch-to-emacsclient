#!/bin/bash

standalone_prog=fe

# If we're on a remote display, don't use emacsclient.
# There must be a better test than this...
if [ -n "$SSH_TTY" ]; then
    $standalone_prog "$@"
    exit $?
fi

# Save the current winid so we know what to switch back to from emacs.
client_winid=`current-winid`

# Switch to emacs and wait for editing to be completed.

debug () {
    :
    echo "$*" >&2
}

switch-to-emacs

emacsclient -a $standalone_prog "$@"

# Switch back to window from which emacsclient was invoked.
wmctrl -ia $client_winid
